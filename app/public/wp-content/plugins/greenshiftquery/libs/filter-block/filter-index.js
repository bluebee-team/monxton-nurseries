let taxArgs={},currentPageObj={},GSFilterobserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(GSFilterobserver.unobserve(e.target),gspbLoadMorepaginationHandler(e.target,"infinitescroll"))})},{root:null,threshold:.5});function GSFilterDebounce(e,t=300){let a;return(...r)=>{a&&clearTimeout(a),a=setTimeout(()=>{e.apply(this,r)},t)}}const GSdebouncedHandle=GSFilterDebounce(GShandleFilterEvent,1e3);async function GShandleFilterEvent(e){let{filter:t,slug:a,connection:r,min:n,max:l,val:i,waschecked:s,relation:d,operator:o}=e.dataset,g=e.value,c=e.type;if(!r||!document.getElementById(r))return console.log("dataConnectionId or targetElement doens't exists"),!1;let p=document.getElementById(r),u=p?.dataset.paginationtype;switch(taxArgs[r],t){case"tax_query":switch(c){case"radio":s===g&&(e.checked=!1,e.setAttribute("data-waschecked",""),taxArgs[r]&&taxArgs[r][a]&&(delete taxArgs[r][a],taxArgs[r].filteredIndexData.tax_query&&(taxArgs[r].filteredIndexData.tax_query[a]=[]))),e.checked&&(e.setAttribute("data-waschecked",g),taxArgs[r][a]||GSupdateTaxArgsObj(taxArgs[r],a,o),taxArgs[r][a]={taxonomy:a,field:"slug",terms:[g],operator:o},taxArgs[r].filteredIndexData.tax_query[a],taxArgs[r].filteredIndexData.taxOperator=o,taxArgs[r].filteredIndexData.tax_query[a]=[i]);break;case"checkbox":e.checked?(taxArgs[r][a]||GSupdateTaxArgsObj(taxArgs[r],a,o),taxArgs[r][a]?.terms.includes(g)||GSupdateTaxQuery(taxArgs[r],a,g,i,o),taxArgs[r].filteredIndexData.taxOperator=o):taxArgs[r][a]&&taxArgs[r][a]?.terms.includes(g)&&GSremoveTermFromTaxQuery(taxArgs[r],a,g,i);break;case"select-one":if(""!==g){let f=e?.options[e?.selectedIndex],x=f.getAttribute("data-val");taxArgs[r][a]||GSupdateTaxArgsObj(taxArgs[r],a,o),taxArgs[r][a]={taxonomy:a,field:"slug",terms:[g],operator:o},taxArgs[r].filteredIndexData.tax_query[a],taxArgs[r].filteredIndexData.tax_query[a]=[x],taxArgs[r].filteredIndexData.taxOperator=o}else delete taxArgs[r][a]}break;case"meta_query":switch(c){case"radio":s===g&&(e.checked=!1,e.setAttribute("data-waschecked",""),taxArgs[r]&&taxArgs[r][a]&&(delete taxArgs[r][a],taxArgs[r].filteredIndexData.meta_query&&(taxArgs[r].filteredIndexData.meta_query[a]=[]))),e.checked&&(e.setAttribute("data-waschecked",g),taxArgs[r][a]||GSupdateMetaArgsObj(taxArgs[r],a,g),taxArgs[r][a]={key:a,value:[g],compare:"IN"},taxArgs[r].filteredIndexData.meta_query[a],taxArgs[r].filteredIndexData.meta_query[a]=[i]);break;case"checkbox":e.checked?(taxArgs[r][a]||GSupdateMetaArgsObj(taxArgs[r],a),taxArgs[r][a]?.value?.includes(g)||GSupdateMetaQuery(taxArgs[r],a,g,i)):taxArgs[r][a]&&taxArgs[r][a]?.value.includes(g)&&GSremoveMetaFromMetaQuery(taxArgs[r],a,g,i);break;case"select-one":if(""!==g){let y=e?.options[e?.selectedIndex],b=y.getAttribute("data-val");taxArgs[r][a]||GSupdateMetaArgsObj(taxArgs[r],a),taxArgs[r][a]={key:a,value:[g],compare:"IN"},taxArgs[r].filteredIndexData.meta_query[a],taxArgs[r].filteredIndexData.meta_query[a]=[b]}else delete taxArgs[r][a];break;case"range":taxArgs[r][a]||GSupdateMetaRangeObj(taxArgs[r],a),taxArgs[r][a]={key:a,value:[n,l],compare:"BETWEEN",type:"numeric"};let A=a+"|range",m={minmax:n+"|"+l,defaultMin:e.min,defaultMax:e.max};taxArgs[r].filteredIndexData.meta_query[A]=m}break;case"search":""!==g?(taxArgs[r].search=g,taxArgs[r].filteredIndexData.search_keyword=g):(delete taxArgs[r].search,taxArgs[r].filteredIndexData.search_keyword="")}filterdata=GSgenerateFilterData(r,p,u,1),currentPageObj[r]={currentPaged:1,filterPanelEnable:!0},await Promise.all([GSfilter_by_rest_func(filterdata,"filter",u),GSrefreshCountRestCall(taxArgs[r].filteredIndexData,r,taxArgs[r])]);let S=document.querySelector(`.gspb__filters-chips[data-filterid=${r}]`);if(S){await GSrefreshFilterChips(taxArgs[r].filteredIndexData,S,r);let h=S.querySelectorAll(".gspb-filter-chip");h.length>0&&document.body.addEventListener("click",async function(e){let t=e.target.closest(".gspb-filter-chip");if(t){if(t.classList.contains("gspb-chip-reset-all")){let a=GSresetFilterData(r,p,"all",u),n=t.getAttribute("data-connectionid"),l=document.querySelector(`.gspb__filters-chips[data-filterid=${n}]`);GSclearSelectedTags("all",n),await Promise.all([GSfilter_by_rest_func(a,"filter",u),GSrefreshCountRestCall(taxArgs[r].filteredIndexData,r),GSrefreshFilterChips(taxArgs[r].filteredIndexData,l,r)])}else{let i=t.getAttribute("data-val"),s=t.getAttribute("data-slug"),d=t.getAttribute("data-type"),o=t.getAttribute("data-filter"),g=t.getAttribute("data-key"),c=t.getAttribute("data-min"),f=t.getAttribute("data-max"),x=t.getAttribute("data-class"),y=t.getAttribute("data-connectionid"),b=document.querySelector(`.gspb__filters-chips[data-filterid=${y}]`),A=t.getAttribute("data-minmax");"range__input"===d&&(i="range__input"),GSclearSelectedTags(i,r,s,x);let m=GSresetFilterData(r,p,"single",u,s,o,g,i,{min:c,max:f,type:d,minmax:A});await Promise.all([GSfilter_by_rest_func(m,"filter",u),GSrefreshCountRestCall(taxArgs[r]?.filteredIndexData,r),GSrefreshFilterChips(taxArgs[r].filteredIndexData,b,r)])}}})}}function GSclearSelectedTags(e,t,a,r){let n=document.querySelector(`.gspb-filterpanel[data-filterid="${t}"]`),l=n.querySelectorAll('.gspb-filterblock[data-range="range"]');if(n){if("all"!==e){let i;if("checkbox"===(i="gspb-search"===e?n.querySelector(`.${e}`):"range__input"===e?n.querySelector(`.${r}`):n.querySelector(`[data-val="${e}"]`)).type||"radio"===i.type)i.checked=!1;else if("select"===i.tagName.toLowerCase())i.selectedIndex=0;else if("input"===i.tagName.toLowerCase()&&"text"===i.type)i.value="";else if("range"===i.type){let s=n.querySelector(`.gspb-filterblock[data-query="${a}"][data-range="range"]`),d=s.getAttribute("data-minmax"),o=d.split("|"),g=i.getAttribute("data-minActive"),c=i.getAttribute("data-maxActive"),p=s.querySelector(".gspb-range__slider-display"),u=s.querySelector(".gspb-range__slider");i.dataset.min=o[0],i.dataset.max=o[1],g&&(i.value=o[0],p.setAttribute("data-low",o[0]),u.style.setProperty("--gspb-range-slider-low-val",0)),c&&(i.value=o[1],p.setAttribute("data-high",o[1]),u.style.setProperty("--gspb-range-slider-high-val",100))}}else{let f=n.querySelectorAll("input");f.forEach(e=>{switch(e.type){case"checkbox":case"radio":e.checked=!1;break;case"text":e.value="";break;case"range":l.forEach(t=>{let a=t.getAttribute("data-minmax"),r=a.split("|"),n=t.querySelectorAll(".gspb-range__slider-input"),l=t.querySelector(".gspb-range__slider-display"),i=t.querySelector(".gspb-range__slider");l.setAttribute("data-low",r[0]),l.setAttribute("data-high",r[1]),i.style.setProperty("--gspb-range-slider-low-val",0),i.style.setProperty("--gspb-range-slider-high-val",100),e.dataset.min=r[0],e.dataset.max=r[1],n[0].value=r[0],n[1].value=r[1]})}});let x=n.querySelectorAll("select");x.forEach(e=>{e.options.length>0&&(e.selectedIndex=0)})}}}function GSgenerateFilterData(e,t,a,r=1){if(!e)return console.log("dataConnectionId doesn't exist!"),!1;let n=t.dataset,l=e.replace(/-/g,"_"),i=void 0!==window[l]?window[l]:"",s=GSgetBlockInstance(e),d=s?.attrs?.post_type,o=s?.attrs?.show;taxArgs[e]||(taxArgs[e]={}),taxArgs[e].post_type=d||"post",taxArgs[e].posts_per_page=o||12,taxArgs[e].filteredIndexData.post_type=d||"post";let g=n?.filterargs?JSON.parse(n?.filterargs):{},{finalTaxArgs:c,finalMetaArgs:p}=GSprepareFilterQuery(taxArgs,e);Object.assign(g,{tax_query:c,meta_query:p,s:taxArgs[e]?.search,post_type:taxArgs[e].post_type,posts_per_page:taxArgs[e].posts_per_page});let u=document.querySelector(`#${e} .wp-block-post-template`),f=document.querySelector(`#${e} .gspb-filter__ajx-pagination`),x=GSgenerateLoader(u,e),y=f&&f.querySelector(".gspb-filter__load_moreajx_btn")?f.querySelector(".gspb-filter__load_moreajx_btn").textContent:"";return{filterargs:JSON.stringify(g),template:n.template,containerid:e,filterconnection:e,offset:void 0,currentpage:r,paginationtype:a,innerargs:n.innerargs,blockinstance:i,querycontainer:u,paginationcontainer:f,loaderContainer:x,loadmoretext:y,allArgs:JSON.stringify(taxArgs[e])}}async function GSfilter_by_rest_func(e,t="",a=""){let{querycontainer:r,paginationcontainer:n,containerid:l,loaderContainer:i}=e,s,d=document.querySelector(`#${l}`).closest(".gs-swiper-init");i.style.display="flex",i.classList.add("loading");let o=new XMLHttpRequest;o.open("POST",RESTVARS.rest_url,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.responseType="json",o.onload=function(){if(this.status>=200&&this.status<400){i.style.display="none",i.classList.remove("loading");let{html:e,paginationHtml:l,currentPage:o,maxPage:g,filterConnectionId:c}=this.response.data,p=Math.floor(1e5*Math.random()),u=e.replace(/gspbgrid_item /g,"gspbgrid_item gspb_grid"+p+" "),f=document.querySelector(`[data-paginationid="${c}"]`);if(f&&(f.setAttribute("data-currentpage",o),f.setAttribute("data-maxpage",g)),"loadmore"===a&&"filter"===t||"numericpagi"===a?s="replace":"loadmore"===a||"infinitescroll"===a?s="append":""===a&&(s="replace"),r){switch(s){case"replace":r.innerHTML="",r.insertAdjacentHTML("beforeend",u);break;case"append":r.innerHTML+=u}"infinitescroll"===a&&"filter"===t&&(r.innerHTML="",r.insertAdjacentHTML("beforeend",e),setTimeout(()=>{gspbFilterInfiniteScrollObserver()},100)),d&&(d.closest(".gs-swiper-init").querySelector(".swiper").swiper.destroy(),GSPB_render_Swiper(d.closest(".gs-swiper-init"))),"pagination"!==t&&null!==n&&(n.innerHTML="",n.insertAdjacentHTML("beforeend",l));let x=r.querySelectorAll(".gspb_grid"+p);x&&x.length>0&&x.forEach(e=>{"function"==typeof GSPBSlidingPanelInit&&GSPBSlidingPanelInit(e),"function"==typeof gsInitTabs&&gsInitTabs(".gspb-tabs",e),"function"==typeof GSPB_Swiper_Init&&GSPB_Swiper_Init(e),"function"==typeof GS_Videos_Init&&GS_Videos_Init(e),"function"==typeof GSPB_Toggler_Init&&GSPB_Toggler_Init(e),"function"==typeof GSPB_quantityInput&&GSPB_quantityInput(e);let t=new CustomEvent("gsAjaxFilterSuccess",{detail:e});document.dispatchEvent(t)})}}},o.onerror=function(){},o.send("action=filterdata&filterargs="+e.filterargs+"&template="+e.template+"&containerid="+e.containerid+"&filterconnection="+e.filterconnection+"&offset="+e.offset+"&currentpage="+e.currentpage+"&paginationtype="+e.paginationtype+"&innerargs="+e.innerargs+"&blockinstance="+e.blockinstance+"&querycontainer="+e.querycontainer+"&allArgs="+e.allArgs)}async function GSrefreshFilterChips(e,t,a){try{let r=await fetch(RESTVARS.refresh_filterchips,{method:"POST",body:JSON.stringify({filteredIndexData:e,dataConnectionId:a}),headers:{"Content-Type":"application/json"}}),n=await r.json();if(n.success){let{chipsHtml:l}=n.data;l&&(t.innerHTML=l)}}catch(i){console.log(i)}}function GSupdateTaxQuery(e,t,a,r,n){e[t]||(e[t]={taxonomy:t,field:"slug",terms:[],operator:n});let l=e[t];l.terms.includes(a)||l.terms.push(a),e.filteredIndexData,e.filteredIndexData.tax_query,e.filteredIndexData.tax_query[t],e.filteredIndexData.tax_query[t].includes(r)||e.filteredIndexData.tax_query[t].push(r)}function GSremoveTermFromTaxQuery(e,t,a,r){let n=e[t]?.terms||[],l=n.indexOf(a);if(-1!==l){if(n.splice(l,1),e.filteredIndexData&&e.filteredIndexData.tax_query){let i=e.filteredIndexData.tax_query[t]||[],s=i.indexOf(r);-1!==s&&i.splice(s,1),0===i.length&&(e.filteredIndexData.tax_query[t]=[])}0===n.length&&delete e[t]}}function GSupdateTaxArgsObj(e,t,a){return e[t]={taxonomy:t,field:"slug",terms:[],operator:a},e}function GSupdateMetaArgsObj(e,t,a){return e[t]={key:t,value:[],compare:"IN"},e}function GSremoveMetaFromMetaQuery(e,t,a,r){let n=e[t]?.value||[],l=n.indexOf(a);if(-1!==l){if(n.splice(l,1),e.filteredIndexData&&e.filteredIndexData.meta_query){let i=e.filteredIndexData.meta_query[t]||[],s=i.indexOf(r);-1!==s&&i.splice(s,1),0===i.length&&(e.filteredIndexData.meta_query[t]=[])}0===n.length&&delete e[t]}}function GSupdateMetaQuery(e,t,a,r){e[t]||(e[t]={key:t,value:[],compare:"IN"});let n=e[t];n.value?.includes(a)||n.value?.push(a),e.filteredIndexData,e.filteredIndexData.meta_query,e.filteredIndexData.meta_query[t],e.filteredIndexData.meta_query[t].includes(r)||e.filteredIndexData.meta_query[t].push(r)}function GSprepareFilterQuery(e,t){let a=e[t];if(!a)return{finalTaxArgs:{},finalMetaArgs:{}};let r={},n={};for(let l in a)a[l].taxonomy?r[l]=a[l]:a[l].key&&(n[l]=a[l]);let i=Object.keys(r).length?{relation:"AND",...r}:{},s=Object.keys(n).length?{relation:"AND",...n}:{};return{finalTaxArgs:i,finalMetaArgs:s}}function GSupdateMetaRangeObj(e,t){return e[t]={key:t,value:[],compare:"BETWEEN",type:"numeric"},e}document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("change",function(e){"gspbfilter"===e.target.dataset.key&&"radio"!==e.target.type&&GShandleFilterEvent(e.target)}),document.addEventListener("input",function(e){e.target.matches(".gspb-search")&&"gspbfilter"===e.target.dataset.key&&GSdebouncedHandle(e.target)}),document.addEventListener("click",function(e){"gspbfilter"===e.target.dataset.key&&"radio"===e.target.type&&GShandleFilterEvent(e.target)}),onLoadIndexingRestCall(),RESTVARS.preSelect&&Object.keys(RESTVARS.preSelect).length>0&&""!=RESTVARS.preSelect.currentTaxonomoy&&GSActiveCateogry()});const GSonRangeInputHandler=(e,t)=>{let[a,r]=e.querySelectorAll(".gspb-range__slider-input"),n=e.querySelector(".gspb-range__slider-display"),l=Number(a.min),i=Number(a.max),s=Number(a.step||1),d=Number(a.value),o=Number(r.value);o-d<s&&(t.target===a?d=Math.max(l,o-s):o=Math.min(i,d+s));let g=Math.round((d-l)/(i-l)*100),c=Math.round((o-l)/(i-l)*100);e.style.setProperty("--gspb-range-slider-low-val",g),e.style.setProperty("--gspb-range-slider-high-val",c),n.dataset.low=d,n.dataset.high=o,a.value=d,r.value=o,t.target.dataset.min=d,t.target.dataset.max=o};function gspbpaginationHandler(e){if("gspbpagination"!==e.dataset.key)return console.log("This key is not set gspbpagination"),!1;let{page:t,connection:a,type:r}=e.dataset,n=parseInt(t);if(!a||!document.getElementById(a))return console.log("dataconenction id or target element doesn't exists"),!1;let l=document.getElementById(a),i=document.querySelector(`[data-paginationid="currentpage-${a}"]`),s=i?parseInt(i.dataset.maxpage):0,d=document.querySelector(`.next-${a}`),o=document.querySelector(`.prev-${a}`),g=document.querySelector(`#${a} .gspb-filter__ajx-pagination`)?.dataset.type;d.dataset.page=Math.min(n+1,s),o.dataset.page=Math.max(n-1,1),d.style.display=n<s?"block":"none",o.style.display=n>1?"block":"none";i.getAttribute("data-currentpage")!=n&&(GSfilter_by_rest_func(GSgenerateFilterData(a,l,g,n),"pagination","numericpagi"),i.setAttribute("data-currentpage",n))}async function gspbLoadMorepaginationHandler(e,t=""){if("gspbpagination"!==e.dataset.key)return console.log("This key is not set gspbpagination"),!1;let{connection:a,type:r}=e.dataset;if(!a||!document.getElementById(a))return console.log("dataconenction id or targetElement doesn't exists"),!1;let n=document.getElementById(a);0===Object.keys(currentPageObj).length&&(currentPageObj[a]={currentPaged:1,filterPanelEnable:!1}),currentPageObj[a].currentPaged++,currentPageObj[a]={currentPaged:currentPageObj[a].currentPaged,filterPanelEnable:!1};let l=document.querySelector(`#${a} .gspb-filter__ajx-inner`),i=document.querySelector(`[data-paginationid="currentpage-${a}"]`),s=i?parseInt(i.dataset.maxpage):0;l.style.display=currentPageObj[a].currentPaged<s?"block":"none";await GSfilter_by_rest_func(GSgenerateFilterData(a,n,t,currentPageObj[a].currentPaged),"pagination",t),i.setAttribute("data-currentpage",currentPageObj[a].currentPaged),setTimeout(()=>{currentPageObj[a].currentPaged<s&&"infinitescroll"===e.dataset.paginationtype&&GSFilterobserver.observe(e)},1e3)}function gspbFilterInfiniteScrollObserver(){if(!document.querySelectorAll(".gspb_aj_pag_auto_wrap").length)return;let e=document.querySelectorAll(".gspb_aj_pag_auto_wrap .gspb-filter__load_moreajx_btn");e.length>0&&Array.from(e).forEach(function(e){GSFilterobserver.observe(e)})}function GSgetBlockInstance(e){let t=e.replace(/-/g,"_");return JSON.parse(decodeURIComponent(void 0!==window[t]?window[t]:""))}function GSappendCountOfItems(e,t,a){let r=t.tax_query,n=t.meta_query;e.forEach(e=>{let t=e.getAttribute("data-val"),a=e.getAttribute("data-filter"),l=e.getAttribute("data-slug"),i=e.closest(".gspb-item"),s=i.querySelector(".gs-filters-counter"),d=e.tagName.toLowerCase(),o={},g=!1;if("tax_query"===a?o=r[l]||{}:"meta_query"===a&&(o=n[l]||{}),"select"===d){let c=e.options;for(let p=0;p<c.length;p++){let u=c[p].getAttribute("data-val");if(u){let f=c[p].textContent.trim().replace(/\(\d+\)/g,"");if(void 0!==o[u]){let x=o[u];c[p].textContent=`${f} (${x})`}else c[p].textContent=`${f} (0)`}c[p].disabled=!u||void 0===o[u]}}for(let y in o)if(Object.hasOwnProperty.call(o,y)){let b=o[y];if(t===y){s&&(s.textContent=`(${b})`),g=!0;break}}g?(i.style.opacity="1",i.style.pointerEvents&&(i.style.pointerEvents="auto")):s&&"_stock_status"!==l&&(s.textContent="(0)",i.style.opacity="0.5",i.style.pointerEvents="none")})}async function GSfetchDataAndUpdateElements(e,t){try{let a=await fetch(RESTVARS.indexing_rest_url,{method:"POST",body:JSON.stringify({filterd_data:e}),headers:{"Content-Type":"application/json"}}),r=await a.json();if(r&&r.success&&r.indexing){let n=r.indexing,l=t?t.querySelectorAll("[data-slug]"):[];GSappendCountOfItems(l,n)}}catch(i){console.error("Error fetching data:",i)}}async function GSrefreshCountRestCall(e,t){if(t){let a=document.querySelectorAll(`.gspb-filterpanel[data-filterid="${t}"]`),r=Array.from(a).map(async t=>{await GSfetchDataAndUpdateElements(e,t)});await Promise.all(r)}else{let n=document.querySelectorAll(".gspbgrid_list_builder"),l=Array.from(n).map(async t=>{let a=t.getAttribute("id");GSgetBlockInstance(a);let r=`.gspb-filterpanel[data-filterid="${a}"]`;await GSfetchDataAndUpdateElements(e,url,r)});await Promise.all(l)}}function onLoadIndexingRestCall(){document.querySelectorAll(".gspbgrid_list_builder").forEach(e=>{let t=GSgetBlockInstance(connectionId=e.getAttribute("id"));taxArgs[connectionId]={filteredIndexData:{post_type:t?.attrs?.post_type?t?.attrs?.post_type:"post",tax_query:{},meta_query:{}}};let a=document.querySelector(`.gspb-filterpanel[data-filterid="${connectionId}"]`);if(a)a.querySelectorAll(".gspb-filterblock").forEach(e=>{let t=e.getAttribute("data-type"),a=e.getAttribute("data-query"),r=e.getAttribute("data-range"),n=e.getAttribute("data-minmax");if("tax_query"===t)taxArgs[connectionId].filteredIndexData.tax_query[a]=[];else if("meta_query"===t){let l="range"===r?`${a}|range`:a,i=[];if("range"===r){i={};let s=n.split("|");i.minmax=n,i.defaultMin=s[0],i.defaultMax=s[1]}taxArgs[connectionId].filteredIndexData.meta_query[l]=i,taxArgs[connectionId].filteredIndexData.search_keyword=""}}),GSrefreshCountRestCall(taxArgs[connectionId].filteredIndexData,connectionId)})}function GSresetFilterData(e,t,a,r,n,l,i,s,d){if(!e)return console.log("dataConnectionId doesn't exist!"),!1;let o=t.dataset,g=e.replace(/-/g,"_"),c=void 0!==window[g]?window[g]:"",p=GSgetBlockInstance(e),u=p?.attrs?.post_type,f=p?.attrs?.show;taxArgs[e]||(taxArgs[e]={}),taxArgs[e].post_type=u||"post",taxArgs[e].posts_per_page=f||12,taxArgs[e].filteredIndexData.post_type=u||"post";let x=o?.filterargs?JSON.parse(o?.filterargs):{},y=document.querySelector(`#${e} .wp-block-post-template`),b=document.querySelector(`#${e} .gspb-filter__ajx-pagination`),A=GSgenerateLoader(y,e),m=taxArgs[e];if("all"===a){for(let S in m.filteredIndexData.tax_query)Object.prototype.hasOwnProperty.call(m.filteredIndexData.tax_query,S)&&(m.filteredIndexData.tax_query[S]=[],delete m[S]);for(let h in m.filteredIndexData.meta_query)if(Object.prototype.hasOwnProperty.call(m.filteredIndexData.meta_query,h)){if(h.includes("|range")){let q=m.filteredIndexData.meta_query[h];m.filteredIndexData.meta_query[h].minmax=`${q.defaultMin}|${q.defaultMax}`}else m.filteredIndexData.meta_query[h]=[],taxArgs[e][h]=[]}for(let I in taxArgs[e])"post_type"!==I&&"posts_per_page"!==I&&"filteredIndexData"!==I&&"search"!==I&&(taxArgs[e][I]=[]);m.filteredIndexData.search_keyword="",taxArgs[e].search=""}else if("single"===a){if("gspb-search"!==s){if("range__input"!==d.type){if(m.filteredIndexData[l][i]){let v=m.filteredIndexData[l][i];if(v.includes(s)){let D=v.filter(e=>e!==s);m.filteredIndexData[l][i]=D}}}else if(m.filteredIndexData[l][`${i}|range`]){let k=`${d.min}|${d.max}`;m.filteredIndexData[l][`${i}|range`].minmax=k}if(taxArgs[e][i]){let G=taxArgs[e][i].terms,$=taxArgs[e][i].value,w;if((G?.includes(n)||$?.includes(n))&&(G&&(w=G.filter(e=>e!==n),taxArgs[e][i].terms=w),"range__input"!==d.type&&$&&(w=$.filter(e=>e!==n),taxArgs[e][i].value=w),0===w.length&&delete taxArgs[e][i]),"range__input"===d.type){$[0]=d.min,$[1]=d.max;let E=d.minmax.split("|");E[0]===d.min&&E[1]===d.max&&delete taxArgs[e][i]}}}else m.filteredIndexData.search_keyword="",delete taxArgs[e].search}let{finalTaxArgs:_,finalMetaArgs:C}=GSprepareFilterQuery(taxArgs,e);return Object.assign(x,{tax_query:_,meta_query:C,post_type:taxArgs[e].post_type,posts_per_page:taxArgs[e].posts_per_page,s:taxArgs[e].search}),{filterargs:JSON.stringify(x),template:o.template,containerid:e,filterconnection:e,offset:void 0,currentpage:1,paginationtype:r,innerargs:o.innerargs,blockinstance:c,querycontainer:y,paginationcontainer:b,loaderContainer:A,allArgs:JSON.stringify(m)}}function GSgenerateLoader(e,t){let a=document.querySelector(`#${t} .gspb-filter-post-loader-container`);if(!a){(a=document.createElement("div")).classList.add("gspb-filter-post-loader-container");let r=document.createElement("span");r.classList.add("gspb-filter-loader"),a.appendChild(r),e.parentNode.insertBefore(a,e)}return a}function GSActiveCateogry(){let e=document.querySelectorAll('input[data-slug="product_cat"]');e.forEach(e=>{let t=e.value;RESTVARS.preSelect.currentTaxonomoy===t&&e.click()})}document.addEventListener("DOMContentLoaded",e=>{let t=document.querySelectorAll(".gspb-range__slider");t.forEach(e=>{let t=e.querySelectorAll(".gspb-range__slider-input");t.forEach(t=>{t.addEventListener("input",t=>{"gspbfilter"===t.target.dataset.key&&GSonRangeInputHandler(e,t)})})})}),document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){if("numericpagi"===e.target.dataset.paginationtype&&"gspbpagination"===e.target.dataset.key){let t=document.querySelectorAll(`[data-paginationtype="${e.target.dataset.paginationtype}"]`);t.forEach(e=>e.classList.remove("gspb-pg-active")),e.target.classList.add("gspb-pg-active"),gspbpaginationHandler(e.target)}"loadmore"===e.target.dataset.paginationtype&&gspbLoadMorepaginationHandler(e.target,"loadmore")})}),gspbFilterInfiniteScrollObserver();